<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>

    <div id="jobs">

    </div>


    <form action="https://localhost:44326/api/values/add" method="post">
        <label>Id</label>
        <input type="text" name="id" />
        <br />
        <label>Description</label>
        <input type="text" name="description" />
        <br />
        <label>Priority</label>
        <input type="text" name="priority" />
        <br />
        <label>Deadline</label>
        <input type="text" name="deadline" />
        <br />
        <label>Status</label>
        <input type="text" name="status" />
        <br />
        <label>Category</label>
        <input type="text" name="category" />
        <input type="submit" />
    </form>

    <label>Edit FORM</label>
    <fieldset id="editform" readonly style="display:none;">
        <form action="https://localhost:44326/api/values/edit" method="post">
            <label>Id</label>
            <input id="editid" type="text" name="id" />
            <br />
            <label>Description</label>
            <input type="text" name="description" />
            <br />
            <label>Priority</label>
            <input type="text" name="priority" />
            <br />
            <label>Deadline</label>
            <input type="text" name="deadline" />
            <br />
            <label>Status</label>
            <input type="text" name="status" />
            <br />
            <label>Category</label>
            <input type="text" name="category" />
            <input type="submit" />
        </form>
    </fieldset>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
    <script>

        function deleteClick(event) {
            $.ajax({
                url: "https://localhost:44326/api/values/delete?id=" + event.target.value,
                method: "POST",
                success: function (res) {
                    console.log(res);
                },
                error: function (error) {
                    console.log(error);
                }
            });
        }
        function editClick(event) {
            $("#editform").css("display", "block");
            $("#editid").val(event.target.value);  
            //$.ajax({
            //    url: "https://localhost:44326/api/values/edit",
            //    method: "POST",
            //    success: function (res) {
            //        console.log(res);
            //    },
            //    error: function (error) {
            //        console.log(error);
            //    }
            //});
        }

        $(function () {

            $("document").ready(function () {
                $.ajax({
                    url: "https://localhost:44326/api/values",
                    method: "GET",

                    success: function (res) {
                        console.log(res);
                        for (var i = 0; i < res.length; i++) {
                            $("#jobs").append(
                                res[i].category.name + "<br>" +
                                res[i].deadline + "<br>" +
                                res[i].description + "<br>" +
                                "<button onclick='deleteClick(event)' id='btn_delete' value='" + res[i].id + "'>Delete</button>"
                                + "<br>" +
                                "<button onclick='editClick(event)' id='btn_edit' value='" + res[i].id + "'>Edit</button>"
                                + "<br>"
                            );
                        }


                        //$("#btn_delete").click(function() {
                        //    console.log("asd");
                        //    $.ajax({
                        //        url: "https://localhost:44326/api/values/delete?id=this.val()",
                        //        method: "POST",

                        //        success: function (res) {
                        //            console.log(res);
                        //        },
                        //        error: function (error) {
                        //            console.log(error);
                        //        }
                        //    });
                        //})

                        

                    },
                    error: function (error) {
                        console.log(error);
                    }
                });




            });




        });
    </script>
</body>
</html>